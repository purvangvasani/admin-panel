import{a as Ee}from"./chunk-DLZ42C5O.js";import{a as Ie}from"./chunk-VQLAA2B3.js";import{a as Pe}from"./chunk-NDAHUKLJ.js";import{a as ye}from"./chunk-JWWHVUZO.js";import{a as se}from"./chunk-F6MBCUBG.js";import{c as ue,d as de,e as me,f as pe,g as ge,h as D,i as he,j as ve,l as _e,o as fe,p as Se,q as Ce,r as be,s as xe,v as De,w as we,y as Fe}from"./chunk-NGUZVOSX.js";import{a as W,d as le}from"./chunk-GJJVJTXG.js";import"./chunk-CSO4ZWHK.js";import{A as Y,C as J,N as K,V as X,W as Z,ba as ee,ca as te,da as ie,ea as ne,fa as oe,ga as re,ha as ae,ia as ce,u as $,v as H,z as Q}from"./chunk-IBYGZ3TV.js";import{Ga as h,Ha as F,Ia as u,Ma as N,N as A,Nb as O,Ob as R,Pb as z,Qb as B,Ta as a,Tb as G,Ua as r,V as _,Va as x,W as f,Wa as T,Xa as V,Za as I,ab as v,cb as p,cc as U,fc as j,la as M,nb as d,oa as l,ob as k,pa as b,pb as L,ub as q,wb as C}from"./chunk-ICF7HI7T.js";import"./chunk-ENQRHBTS.js";var E=n=>({cursor:n}),P=n=>({border:n});function Ne(n,m){n&1&&(a(0,"span",29),d(1," UPI ID is required"),r())}function Te(n,m){if(n&1&&(a(0,"div",18)(1,"label",19),d(2,"UPI ID"),r(),x(3,"input",27),h(4,Ne,2,0,"span",28),r()),n&2){let e=p(2);l(3),u("ngStyle",C(2,P,e.accountForm.controls.upiId.hasError("required")&&e.accountForm.controls.upiId.touched?"2px solid red":"")),l(),u("ngIf",e.accountForm.controls.upiId.hasError("required")&&e.accountForm.controls.upiId.touched)}}function Ve(n,m){if(n&1&&(a(0,"div",36),x(1,"img",37),r()),n&2){let e=p(3);l(),u("src",e.url,M)("alt",e.accountForm.value.upiId)}}function ke(n,m){n&1&&(a(0,"div",38),d(1,"Select Logo"),r())}function Le(n,m){if(n&1){let e=I();a(0,"div",18)(1,"label",30),d(2,"QR Code"),r(),a(3,"div",19)(4,"div",31),h(5,Ve,2,2,"div",32),a(6,"label",33),h(7,ke,2,0,"div",34),r(),x(8,"br"),a(9,"input",35),v("ngModel",function(){_(e);let s=p(2);return f(s.url)})("change",function(s){_(e);let o=p(2);return f(o.onSelectFile(s))}),r()()()()}if(n&2){let e=p(2);l(5),u("ngIf",e.url&&e.url!==""),l(2),u("ngIf",!e.url)}}function qe(n,m){n&1&&(a(0,"span",29),d(1," Account Name is required"),r())}function Oe(n,m){n&1&&(a(0,"span",29),d(1," Account Number is required"),r())}function Re(n,m){n&1&&(a(0,"span",29),d(1," IFSC is required"),r())}function ze(n,m){if(n&1&&(a(0,"div",17)(1,"div",18)(2,"label",19),d(3,"Account Name"),r(),x(4,"input",39),h(5,qe,2,0,"span",28),r(),a(6,"div",18)(7,"label",19),d(8,"Account Number"),r(),x(9,"input",40),h(10,Oe,2,0,"span",28),r(),a(11,"div",18)(12,"label",19),d(13,"IFSC Code"),r(),x(14,"input",41),h(15,Re,2,0,"span",28),r()()),n&2){let e=p(2);l(4),u("ngStyle",C(6,P,e.accountForm.controls.accountName.hasError("required")&&e.accountForm.controls.accountName.touched?"2px solid red":"")),l(),u("ngIf",e.accountForm.controls.accountName.hasError("required")&&e.accountForm.controls.accountName.touched),l(4),u("ngStyle",C(8,P,e.accountForm.controls.accountNumber.hasError("required")&&e.accountForm.controls.accountNumber.touched?"2px solid red":"")),l(),u("ngIf",e.accountForm.controls.accountNumber.hasError("required")&&e.accountForm.controls.accountNumber.touched),l(4),u("ngStyle",C(10,P,e.accountForm.controls.ifsc.hasError("required")&&e.accountForm.controls.ifsc.touched?"2px solid red":"")),l(),u("ngIf",e.accountForm.controls.ifsc.hasError("required")&&e.accountForm.controls.ifsc.touched)}}function Be(n,m){if(n&1){let e=I();a(0,"div",2)(1,"c-card")(2,"c-card-header")(3,"h5"),d(4,"Account Details"),r()(),a(5,"c-card-body")(6,"form",16)(7,"div",17)(8,"div",18)(9,"label",19),d(10,"Mode"),r(),a(11,"select",20)(12,"option",21),d(13,"UPI ID "),r(),a(14,"option",22),d(15,"IMPS "),r()()(),h(16,Te,5,4,"div",23)(17,Le,10,2,"div",23),r(),h(18,ze,16,12,"div",24),a(19,"div",17)(20,"div",25)(21,"button",26),v("click",function(){_(e);let s=p();return f(s.submit())}),d(22," Submit "),r()(),a(23,"div",25)(24,"button",26),v("click",function(){_(e);let s=p();return f(s.cancel())}),d(25," Cancel "),r()()()()()()()}if(n&2){let e=p();l(6),u("formGroup",e.accountForm),l(6),F("disabled",e.accountForm.get("ifsc").value?!0:null),l(2),F("disabled",e.accountForm.get("upiId").value?!0:null),l(2),u("ngIf",e.accountForm.controls.mode.value==="upi"),l(),u("ngIf",e.accountForm.controls.mode.value==="upi"),l(),u("ngIf",e.accountForm.controls.mode.value==="imps"),l(3),u("ngClass","btn btn-primary submit"),l(3),u("ngClass","btn btn-default")}}function Ge(n,m){if(n&1){let e=I();T(0),a(1,"li",42)(2,"a",11),v("click",function(){let s=_(e).index,o=p();return f(o.currentPage===s+1?null:o.handlePagination(s+1))}),d(3),r()(),V()}if(n&2){let e=m.index,c=p();l(),u("active",c.currentPage===e+1)("ngStyle",C(3,E,c.currentPage===e+1?"":"pointer")),l(2),k(e+1)}}function Ue(n,m){if(n&1){let e=I();a(0,"div")(1,"c-modal",43,0),v("visibleChange",function(s){_(e);let o=p();return f(o.handleDeleteToggleChange(s))}),a(3,"c-modal-header")(4,"h5",44),d(5,"Delete Account "),a(6,"small"),d(7),r()(),a(8,"button",45),v("click",function(){_(e);let s=p();return f(s.cancel())}),r()(),a(9,"c-modal-body"),d(10,"Are you sure you want to delete the Account?"),r(),a(11,"c-modal-footer")(12,"button",46),v("click",function(){_(e);let s=p();return f(s.cancel())}),d(13," Close "),r(),a(14,"button",47),v("click",function(){_(e);let s=p();return f(s.deleteRecord())}),d(15,"Delete"),r()()()()}if(n&2){let e=p();l(),u("@.disabled",!0)("visible",e.deleteModalVisible),l(6),L("(",e.deleteData==null?null:e.deleteData.accountId,")")}}var ft=(()=>{let m=class m{constructor(c,s,o,w,y,Ae){this.route=c,this.localStorageService=s,this.utilService=o,this.toastrService=w,this.loaderService=y,this.accountDetailsService=Ae,this.paramsubscriptions=[],this.access=null,this.accessModule=null,this.currentUserRole=this.utilService.getCurrentUserRole(),this.accountList=[],this.totalPages=1,this.currentPage=1,this.deleteModalVisible=!1,this.accessSubModule=null,this.context={componentParent:this},this.columnDefs=[],this.defaultColDef={filter:!0},this.rowSelection="multiple",this.paginationPageSize=10,this.paginationPageSizeSelector=[10,20,50],this.themeClass="ag-theme-quartz",this.url=null,this.onSelectFile=i=>{if(i.target.files&&i.target.files[0]){var g=new FileReader;g.readAsDataURL(i.target.files[0]),g.onload=t=>{this.url=t?.target?.result}}},this.buildForm=i=>{this.accountForm=new ge({mode:new D(i&&i.mode?i.mode:"upi"),upiId:new D(i&&i.upiId?i.upiId:null),accountName:new D(i&&i.accountName?i.accountName:null),accountNumber:new D(i&&i.accountNumber?i.accountNumber:null),ifsc:new D(i&&i.ifsc?i.ifsc:null),image:new D(i?.image??null,de.required)})},this.editAccount=i=>{this.editAccountData=i,this.url=i.qrcode,this.buildForm(i)},this.cancel=()=>{this.editAccountData=null,this.deleteData=null,this.url="",this.accountForm.reset(),this.deleteModalVisible=!1,this.buildForm()},this.deleteRecord=()=>{let i=t=>{this.loaderService.hideLoader(),t&&t.success?(this.toastrService.showSuccess("Success!",t.message),this.cancel(),this.getAll()):this.toastrService.showError("Error!",t.message)},g=t=>{this.loaderService.hideLoader(),this.toastrService.showError("Error!",t.error&&t.error?.errors?.msg?t.error.errors.msg:"Error while deleting record.")};this.loaderService.showLoader(),this.accountDetailsService.deleteById({accountId:this.deleteData.accountId},i,g)},this.handlePagination=i=>{this.currentPage=i,this.accountList=[],this.getAll()},this.submit=()=>{let i=t=>{t&&t.success?(this.toastrService.showSuccess("Success!",t.message),this.loaderService.hideLoader(),this.cancel(),this.getAll()):(this.loaderService.hideLoader(),this.toastrService.showError("Error!",t.message||t.msg))},g=t=>{this.loaderService.hideLoader(),this.toastrService.showError("Error!",t.error&&t.error?.errors?.msg?t.error.errors.msg:"Error while add/update account details..")};this.loaderService.showLoader(),this.accountForm.value.qrcode=this.url,this.editAccountData?.accountId?(this.accountForm.value.accountId=this.editAccountData?.accountId,this.accountDetailsService.update(this.accountForm.value,i,g)):this.accountDetailsService.add(this.accountForm.value,i,g)},this.getAll=()=>{let i=t=>{t&&t.success?t.data&&t.data.length?(this.accountList=t.data||[],this.rowData=t.data,this.currentPage=t.currentPage,this.totalPages=t.totalPages):this.accountList=[]:this.toastrService.showError("Error!",t.message),this.loaderService.hideLoader()},g=t=>{this.loaderService.hideLoader(),this.toastrService.showError("Error!",t.error&&t.error?.errors?.msg?t.error.errors.msg:"Error while fetching account details.")};this.loaderService.showLoader(),this.accountDetailsService.getAll({pageQuery:this.currentPage,pageSize:this.paginationPageSize},i,g)},this.onPaginationChanged=i=>{console.log("onPaginationPageLoaded")},this.onGridReady=i=>{this.gridApi=i.api,this.getAll()};let Me=this.route.data.subscribe(i=>{if(this.accessModule=i.module,this.accessSubModule=i.subModule,this.accessModule){let g=this.localStorageService.getValue("user")?.permissions?JSON.parse(this.localStorageService.getValue("user").permissions):ye.permissionList;if(g&&g.length){let t=g.filter(S=>S.key===this.accessModule)[0];t&&t.submodule&&t.submodule.length?this.access=t.submodule.filter(S=>S.key===this.accessSubModule)[0].access:this.access=t.access,this.access=this.access[this.currentUserRole],this.access&&this.access.view?(this.columnDefs=[{headerName:"#",filter:!1,sortable:!1,valueFormatter:S=>`${S.node.data.accountId}`,suppressMovable:!0},{headerName:"Mode",filter:!1,sortable:!1,valueFormatter:S=>`${S.node.data.mode==="upi"?"UPI ID":"IMPS"}`,suppressMovable:!0},{headerName:"UPI",field:"upiId",suppressMovable:!0},{headerName:"Account Name",field:"accountName",suppressMovable:!0},{headerName:"Account Number",field:"accountNumber",suppressMovable:!0}],this.access?.edit&&this.columnDefs.push({headerName:"Action",filter:!1,sortable:!1,valueFormatter:S=>`${S.node.data}`,cellRenderer:Ie,cellRendererParams:{specificId:"actionToggleButton",onClick:this.onButtonClick.bind(this)}}),this.getAll()):(this.toastrService.showWarning("Warning!","You donot have permission to view this page. Please contact to administrator!"),this.utilService.goto("/dashboard"))}}});this.paramsubscriptions.push(Me)}onButtonClick(c,s){s==="update"?this.editAccount(c):this.toggleDeleteModal(c)}ngOnInit(){this.access&&this.access.view?(this.getAll(),this.buildForm()):(this.toastrService.showWarning("Warning!","You donot have permission to view this page. Please contact to administrator!"),this.utilService.goto("/home"))}ngOnDestroy(){try{if(this.paramsubscriptions)for(let c=0;c<this.paramsubscriptions.length;c++)this.paramsubscriptions[c].unsubscribe()}catch(c){console.error(c)}try{this.params&&this.params.unsubscribe()}catch(c){console.error(c)}}toggleDeleteModal(c){this.deleteData=c,this.deleteModalVisible=!this.deleteModalVisible}handleDeleteToggleChange(c){this.deleteModalVisible=c}numSequence(c){return Array(c)}};m.\u0275fac=function(s){return new(s||m)(b(U),b(le),b(se),b(Fe),b(W),b(Ee))},m.\u0275cmp=A({type:m,selectors:[["app-account-Details"]],standalone:!0,features:[q],decls:24,vars:23,consts:[["staticBackdropModal",""],["style","margin-bottom: 10px;",4,"ngIf"],[2,"margin-bottom","10px"],[1,"justify-content-center"],["lg","12","xl","12"],[1,"example-wrapper"],[1,"example-header"],[2,"margin-top","6px"],[2,"float","right"],["align","end"],["cPageItem","",3,"disabled","ngStyle"],["cPageLink","",3,"click","routerLink"],[4,"ngFor","ngForOf"],[1,"data-table"],[2,"width","100%","height","400px",3,"paginationChanged","gridReady","columnDefs","defaultColDef","rowSelection","paginationPageSize","paginationPageSizeSelector","pagination","suppressPaginationPanel","suppressScrollOnNewData","rowData","context"],[4,"ngIf"],[3,"formGroup"],[1,"form-group","row","mb-3"],[1,"col-md-4"],[1,"col-form-label"],["formControlName","mode","aria-label","Default select example","cSelect",""],["value","upi"],["value","imps"],["class","col-md-4",4,"ngIf"],["class","form-group row mb-3",4,"ngIf"],[1,"col-md-2"],[3,"click","ngClass"],["type","text","formControlName","upiId","id","upiId","placeholder","Enter UPI Id","required","",1,"form-control",3,"ngStyle"],["style","color: red",4,"ngIf"],[2,"color","red"],["for","staticEmail",1,"col-form-label"],[1,"image-container"],["class","imagePreview",4,"ngIf"],["for","fileInput",1,"hoverable"],["class","hover-text",4,"ngIf"],["id","fileInput","type","file","accept","image/x-png,image/jpg,image/jpeg",1,"select-profile-picture",3,"ngModel","change"],[1,"imagePreview"],[3,"src","alt"],[1,"hover-text"],["type","text","formControlName","accountName","id","accountName","placeholder","Enter Account Name","required","",1,"form-control",3,"ngStyle"],["type","text","formControlName","accountNumber","id","accountNumber","placeholder","Enter Account Number","required","",1,"form-control",3,"ngStyle"],["type","text","formControlName","ifsc","id","ifsc","placeholder","Enter IFSC","required","",1,"form-control",3,"ngStyle"],["cPageItem","",3,"active","ngStyle"],["backdrop","static","id","staticBackdropModal",3,"visibleChange","visible"],["cModalTitle",""],["cButtonClose","",3,"click"],["cButton","","color","secondary",3,"click"],["cButton","","color","danger",3,"click"]],template:function(s,o){s&1&&(h(0,Be,26,8,"div",1),a(1,"div",2)(2,"c-card")(3,"c-card-header")(4,"h5"),d(5,"Account List"),r()(),a(6,"c-card-body")(7,"c-row",3)(8,"c-col",4)(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"c-pagination",9)(14,"li",10)(15,"a",11),v("click",function(){return o.handlePagination(o.currentPage-1)}),d(16,"Previous"),r()(),h(17,Ge,4,5,"ng-container",12),a(18,"li",10)(19,"a",11),v("click",function(){return o.handlePagination(o.currentPage+1)}),d(20,"Next"),r()()()()()(),a(21,"div",13)(22,"ag-grid-angular",14),v("paginationChanged",function(y){return o.onPaginationChanged(y)})("gridReady",function(y){return o.onGridReady(y)}),r()()()()()()()(),h(23,Ue,16,3,"div",15)),s&2&&(u("ngIf",(o.access==null?null:o.access.add)||(o.access==null?null:o.access.edit)),l(14),u("disabled",o.currentPage===1)("ngStyle",C(19,E,o.currentPage===1?"":"pointer")),l(3),u("ngForOf",o.numSequence(o.totalPages)),l(),u("disabled",o.currentPage===o.totalPages)("ngStyle",C(21,E,o.currentPage===o.totalPages?"":"pointer")),l(4),N(o.themeClass),u("columnDefs",o.columnDefs)("defaultColDef",o.defaultColDef)("rowSelection",o.rowSelection)("paginationPageSize",o.paginationPageSize)("paginationPageSizeSelector",o.paginationPageSizeSelector)("pagination",!0)("suppressPaginationPanel",!0)("suppressScrollOnNewData",!0)("rowData",o.rowData)("context",o.context),l(),u("ngIf",o.deleteModalVisible))},dependencies:[Pe,oe,ie,ne,ee,te,ce,ae,re,H,j,G,O,R,z,B,K,Q,J,Y,$,we,ve,Ce,be,ue,Se,me,pe,xe,_e,fe,De,he,Z,X],styles:[".example-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}#myGrid[_ngcontent-%COMP%]{flex:1 1 0px;width:100%}.example-header[_ngcontent-%COMP%]{font-family:Verdana,Geneva,Tahoma,sans-serif;font-size:13px;margin-bottom:5px}.value[_ngcontent-%COMP%]{margin-right:20px;font-weight:700;width:50px;display:inline-block;text-align:right;padding-right:2px}.data-table[_ngcontent-%COMP%]     .ag-cell-value.ag-cell.ag-cell-not-inline-editing.ag-cell-normal-height.ag-column-last.ag-cell-focus{overflow:visible}.data-table[_ngcontent-%COMP%]     .ag-row{z-index:0}.data-table[_ngcontent-%COMP%]     .ag-row.ag-row-focus{z-index:1}.img-preview[_ngcontent-%COMP%]{max-width:100%;max-height:200px;margin-top:10px}.image-container[_ngcontent-%COMP%]{position:relative;display:inline-block;text-align:center}img[_ngcontent-%COMP%]{height:150px;width:150px;border-radius:10%}.select-profile-picture[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:999;opacity:0;width:100%;height:100%;cursor:pointer}"]});let n=m;return n})();export{ft as AccountDetailsComponent};
