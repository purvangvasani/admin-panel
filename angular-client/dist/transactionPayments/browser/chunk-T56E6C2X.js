import{a as ve}from"./chunk-KVYDP3SW.js";import{a as be}from"./chunk-U2KI6PSQ.js";import{a as re}from"./chunk-F6MBCUBG.js";import{b as oe,c as ae,e as le,f as ce,h as p,i as me,j as de,k as se,l as ue,o as he,s as pe,t as fe,u as _e,v as ge,w as we,y as Ce}from"./chunk-NGUZVOSX.js";import{a as Q}from"./chunk-GJJVJTXG.js";import"./chunk-CSO4ZWHK.js";import{A as $,B as Y,C as z,L as J,P as K,Q as X,R as Z,S as ee,U as te,V as ie,W as ne,u as U,z as H}from"./chunk-IBYGZ3TV.js";import{Cb as j,Ga as S,Ia as s,N as W,Ob as R,Pb as G,Ta as l,Tb as O,Ua as r,V as v,Va as _,W as b,Wa as y,Xa as F,Za as x,ab as I,cb as h,cc as P,fb as T,hb as k,ib as A,jb as D,mb as L,nb as u,oa as d,ob as V,pa as f,pb as q,qb as N,rb as E,sb as M,ub as B}from"./chunk-ICF7HI7T.js";import"./chunk-ENQRHBTS.js";var Fe=["loader"];function xe(o,m){if(o&1&&(l(0,"label",26),u(1),r()),o&2){let t=h().$implicit;s("for",t.fieldName),d(),q(" ",t.fieldName," ")}}function Ne(o,m){o&1&&_(0,"label")}function Ee(o,m){if(o&1){let t=x();l(0,"input",27),I("ngModelChange",function(n){v(t);let a=h(3);return b(a.handleFieldEvents(n))}),M("ngModelChange",function(n){v(t);let a=h().$implicit;return E(a.value,n)||(a.value=n),b(n)}),r()}if(o&2){let t=h().$implicit;s("placeholder",t.placeHolder)("type",t.fieldType),N("ngModel",t.value),s("id",t.fieldName)("name",t.fieldName)("required",t.required)}}function Me(o,m){if(o&1){let t=x();l(0,"c-form-check")(1,"input",28),I("ngModelChange",function(n){v(t);let a=h(3);return b(a.handleFieldEvents(n))}),M("ngModelChange",function(n){v(t);let a=h().$implicit;return E(a.value,n)||(a.value=n),b(n)}),r(),l(2,"label",29),u(3),r()()}if(o&2){let t=h().$implicit;d(),N("ngModel",t.value),s("id",t.fieldName)("name",t.fieldName)("required",t.required),d(),s("for",t.fieldName),d(),V(t.fieldName)}}function We(o,m){if(o&1&&(y(0),l(1,"c-col",7),S(2,xe,2,2,"label",24)(3,Ne,1,0,"ng-template",null,0,j)(5,Ee,1,6,"input",25)(6,Me,4,6,"c-form-check",21),r(),F()),o&2){let t=m.$implicit,c=L(4);d(2),s("ngIf",t.fieldType!=="checkbox")("ngIfElse",c),d(3),s("ngIf",t.fieldType!=="checkbox"),d(),s("ngIf",t.fieldType==="checkbox")}}function Te(o,m){if(o&1&&(y(0),S(1,We,7,4,"ng-container",23),F()),o&2){let t=h();d(),s("ngForOf",t.withdrawalFields)}}var Je=(()=>{let m=class m{constructor(c,n,a,w,Se,Ie,ye){this.fb=c,this.toastrService=n,this.utilService=a,this.loaderService=w,this.transactionService=Se,this.route=Ie,this.merchantService=ye,this.merchant="",this.merchantData=null,this.withdrawalFields=[],this.buildForm=e=>{this.withdrawalForm=this.fb.group({merchantId:new p(e&&e.merchantId?e.merchantId:null),accountName:new p(e&&e.accountName?e.accountName:null),accountNumber:new p(e&&e.accountNumber?e.accountNumber:null),amount:new p(e&&e.amount?e.amount:null),ifsc:new p(e&&e.ifsc?e.ifsc:null),upiId:new p(e&&e.upiId?e.upiId:null),status:new p(e&&e.merchantId?e.merchantId:"Processing"),type:new p("Withdrawal")}),this.withdrawalForm.get("merchantId")?.disable()},this.addTransaction=()=>{let e=i=>{i&&i.success?(this.toastrService.showSuccess("Success!",i.message),this.loaderService.hideLoader(),this.cancel()):(this.loaderService.hideLoader(),this.toastrService.showError("Error!",i&&i?.message?i?.message:"Something Went Wrong."))},C=i=>{this.loaderService.hideLoader(),this.toastrService.showError("Error!",i.error&&i.error?.errors?.msg?i.error.errors.msg:"Something Went Wrong.")};this.loaderService.showLoader();let g=this.mergeAdditionalFields(this.withdrawalForm.value,this.withdrawalFields);g.merchantId=this.id,this.transactionService.addTransaction(g,e,C)},this.mergeAdditionalFields=(e,C)=>(C.forEach(g=>{e[g.fieldName]=g.value}),e),this.handleFieldEvents=e=>{},this.getMerchantById=e=>{let C=i=>{i&&i.success?i.data.merchantname&&(this.merchantData=i.data,this.merchant=i.data.merchantname,this.withdrawalFields=i.data.depositFields.withdrawals?.length?i.data.depositFields.withdrawals[0].typeDetails:[]):(this.toastrService.showError("Error!",i.message),this.utilService.goto("/404")),this.loaderService.hideLoader()},g=i=>{this.loaderService.hideLoader(),this.toastrService.showError("Error!",i.error&&i.error?.errors?.msg?i.error.errors.msg:"Error while fetching merchant."),this.utilService.goto("/404")};this.loaderService.showLoader(),this.merchantService.getById({merchantId:e,for:"public",get:"bankDeposits"},C,g)},this.cancel=()=>{this.withdrawalForm=null,this.withdrawalFields.forEach(e=>{e.value!==""&&e.value!==null&&e.value!==void 0&&(e.value="")}),this.buildForm()}}ngOnInit(){this.route.params.subscribe(c=>{c.id?(this.id=c.id,this.getMerchantById(c.id)):(this.toastrService.showWarning("Warning!","You donot have permission to view this page!"),this.utilService.goto("/404"))}),this.buildForm()}};m.\u0275fac=function(n){return new(n||m)(f(_e),f(Ce),f(re),f(Q),f(be),f(P),f(ve))},m.\u0275cmp=W({type:m,selectors:[["app-withdrawal-add"]],viewQuery:function(n,a){if(n&1&&k(Fe,5),n&2){let w;A(w=D())&&(a.loaderComponent=w.first)}},standalone:!0,features:[B],decls:41,vars:3,consts:[["tmpblank",""],[1,"bg-light","dark:bg-transparent","d-flex","flex-row","align-items-center",2,"min-height","45vh !important"],["breakpoint","md"],[1,"justify-content-center"],["lg","10","xl","8"],["cForm","",3,"formGroup"],[1,"row"],["sm","12","xs","12","md","6","lg","4",2,"padding","5px"],["cLabel","col","for","merchantId"],["cFormControl","","placeholder","Merchant Name","type","text","id","merchantId","name","merchantId","disabled","",3,"value"],["cLabel","col","for","accountName"],["cFormControl","","placeholder","Amount Name","type","text","formControlName","accountName","id","accountName","name","accountName","required",""],["cLabel","col","for","accountNumber"],["cFormControl","","placeholder","Amount Number","type","number","formControlName","accountNumber","id","accountNumber","name","accountNumber","required",""],["cLabel","col","for","ifsc"],["cFormControl","","placeholder","IFSC","type","number","formControlName","ifsc","id","ifsc","name","ifsc"],["cLabel","col","for","amount"],["cFormControl","","placeholder","Amount","type","number","formControlName","amount","id","amount","name","amount","required",""],["cLabel","col","for","upiId"],["cFormControl","","placeholder","UPI Id","type","text","formControlName","upiId","id","upiId","name","upiId"],[1,"row","mt-2"],[4,"ngIf"],["cButton","","color","primary",1,"px-4",3,"click"],[4,"ngFor","ngForOf"],["cLabel","col",3,"for",4,"ngIf","ngIfElse"],["cFormControl","",3,"placeholder","type","ngModel","id","name","required","ngModelChange",4,"ngIf"],["cLabel","col",3,"for"],["cFormControl","",3,"ngModelChange","placeholder","type","ngModel","id","name","required"],["cFormCheckInput","","type","checkbox",3,"ngModelChange","ngModel","id","name","required"],["cFormCheckLabel","",3,"for"]],template:function(n,a){n&1&&(l(0,"div",1)(1,"c-container",2)(2,"c-row",3)(3,"c-col",4)(4,"c-card-group")(5,"c-card")(6,"c-card-header"),u(7,"Withdrawal Request Form"),r(),l(8,"c-card-body")(9,"form",5)(10,"c-row",6)(11,"c-col",7)(12,"label",8),u(13," Merchant "),r(),_(14,"input",9),r(),l(15,"c-col",7)(16,"label",10),u(17," Account Name "),r(),_(18,"input",11),r(),l(19,"c-col",7)(20,"label",12),u(21," Account Number "),r(),_(22,"input",13),r(),l(23,"c-col",7)(24,"label",14),u(25," IFSC "),r(),_(26,"input",15),r(),l(27,"c-col",7)(28,"label",16),u(29," Amount "),r(),_(30,"input",17),r(),l(31,"c-col",7)(32,"label",18),u(33," UPI ID "),r(),_(34,"input",19),r()()(),l(35,"c-row",20),S(36,Te,2,1,"ng-container",21),r(),l(37,"c-row")(38,"c-col",7)(39,"button",22),I("click",function(){return a.addTransaction()}),u(40," Submit "),r()()()()()()()()()()),n&2&&(d(9),s("formGroup",a.withdrawalForm),d(5),T("value",a.merchantData==null?null:a.merchantData.merchantname),d(22),s("ngIf",a.withdrawalFields.length))},dependencies:[ge,de,ae,se,oe,le,ce,pe,fe,me,O,R,G,we,ue,he,te,ne,ie,z,Y,H,$,J,ee,U,X,Z,K]});let o=m;return o})();export{Je as WithdrawalAddComponent};
