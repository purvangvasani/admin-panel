import{a as be}from"./chunk-MOM55J64.js";import{a as ve}from"./chunk-KVYDP3SW.js";import{a as he,b as fe}from"./chunk-6UGNY33E.js";import{a as ee}from"./chunk-F6MBCUBG.js";import{b as te,c as ie,e as re,f as le,j as ne,l as oe,m as ae,n as se,o as me,u as ce,v as de,w as pe,y as ue}from"./chunk-NGUZVOSX.js";import{a as V}from"./chunk-GJJVJTXG.js";import"./chunk-CSO4ZWHK.js";import{A as P,C as q,L as O,O as R,P as K,Q as j,R as U,S as z,V as $,W,b as H,ra as J,sa as Q,ta as X,u as G,ua as Y,va as Z,z as A}from"./chunk-IBYGZ3TV.js";import{Ga as v,Ia as a,N as D,Ob as L,Pb as T,Ta as r,Tb as B,Ua as t,V as y,Va as d,W as S,X as C,Y as x,Za as F,ab as _,cb as b,cc as M,nb as n,oa as s,pa as g,pb as E,ub as N}from"./chunk-ICF7HI7T.js";import"./chunk-ENQRHBTS.js";function ye(m,p){if(m&1){let h=F();r(0,"button",29),_("click",function(){y(h);let c=b().index,o=b();return S(o.removeBankItem(c))}),n(1,"-"),t()}}function Se(m,p){if(m&1&&(r(0,"div",30)(1,"c-row",8)(2,"c-col",31)(3,"label",32),n(4,"Name"),t(),d(5,"input",33),t(),r(6,"c-col",31)(7,"label",34),n(8,"Value"),t(),d(9,"input",35),t(),r(10,"c-col",36),v(11,ye,2,0,"button",37),t()()()),m&2){let h=p.index,e=b();a("formGroupName",h),s(11),a("ngIf",e.uploadDetails.length>1)}}function Ce(m,p){m&1&&(r(0,"c-col",31)(1,"label",12),n(2," Placeholder "),t(),d(3,"input",46),t())}function xe(m,p){if(m&1){let h=F();r(0,"button",29),_("click",function(){y(h);let c=b().index,o=b();return S(o.removeDepositItem(c))}),n(1,"-"),t()}}function Fe(m,p){if(m&1&&(r(0,"div",30)(1,"c-row",8)(2,"c-col",9)(3,"label",38),n(4," Field Name "),t(),d(5,"input",39),t(),r(6,"c-col",9)(7,"label",12),n(8," Display Mode "),t(),d(9,"ng-select",40),t(),r(10,"c-col",9)(11,"label",12),n(12," Field: "),t(),d(13,"ng-select",41),t()(),r(14,"c-row",8)(15,"c-col",31)(16,"c-form-check",42)(17,"label",43),n(18,"Required Field?"),t(),d(19,"input",44),t()(),v(20,Ce,4,0,"c-col",45),r(21,"c-col",36),v(22,xe,2,0,"button",37),t()()()),m&2){let h,e=p.$implicit,c=p.index,o=b();a("formGroupName",c),s(9),a("items",o.displayModeList)("multiple",!1)("clearable",!1),s(4),a("items",o.fieldList)("multiple",!1)("clearable",!1),s(7),a("ngIf",((h=e.get("fieldType"))==null?null:h.value)!=="checkbox"),s(2),a("ngIf",o.depositFields.length>=1)}}function Ie(m,p){m&1&&(r(0,"c-col",31)(1,"label",47),n(2," PlaceHolder "),t(),d(3,"input",46),t())}function De(m,p){if(m&1){let h=F();r(0,"button",29),_("click",function(){y(h);let c=b().index,o=b();return S(o.removewithdrawlItem(c))}),n(1,"-"),t()}}function Ee(m,p){if(m&1&&(r(0,"div",30)(1,"c-row",8)(2,"c-col",9)(3,"label",38),n(4," Field Name "),t(),d(5,"input",39),t(),r(6,"c-col",9)(7,"label",12),n(8," Display Mode "),t(),d(9,"ng-select",40),t(),r(10,"c-col",9)(11,"label",12),n(12," Field: "),t(),d(13,"ng-select",41),t()(),r(14,"c-row",8)(15,"c-col",31)(16,"c-form-check",42)(17,"label",43),n(18,"Required Field?"),t(),d(19,"input",44),t()(),v(20,Ie,4,0,"c-col",45),r(21,"c-col",36),v(22,De,2,0,"button",37),t()()()),m&2){let h,e=p.$implicit,c=p.index,o=b();a("formGroupName",c),s(9),a("items",o.displayModeList)("multiple",!1)("clearable",!1),s(4),a("items",o.fieldList)("multiple",!1)("clearable",!1),s(7),a("ngIf",((h=e.get("fieldType"))==null?null:h.value)!=="checkbox"),s(2),a("ngIf",o.withdrawlFields.length>1)}}var rt=(()=>{let p=class p{constructor(e,c,o,k,ge,_e,ke){this.fb=e,this.toastrService=c,this.bankService=o,this.route=k,this.utilService=ge,this.loaderService=_e,this.merchantService=ke,this.refList=[{label:"All Partners",value:"allPartners"},{label:"22bet.com",value:"22bet.com"}],this.displayModeList=[{label:"input",value:"input"},{label:"textarea",value:"textarea"}],this.fieldList=[{label:"text",value:"text"},{label:"number",value:"number"}],this.deleteModalVisible=!1,this.totalPages=1,this.currentPage=1,this.access=null,this.accessModule=null,this.accessSubModule=null,this.currentUserRole=this.utilService.getCurrentUserRole(),this.merchantList=[],this.bankIdList=[],this.getById=()=>{let u=i=>{this.loaderService.hideLoader(),i&&i.success&&i.data?(this.editBankData=i.data,this.buildForm(i.data)):this.toastrService.showError("Error!",i.message)},f=i=>{this.loaderService.hideLoader(),this.toastrService.showError("Error!",i.error&&i.error?.errors?.msg?i.error.errors.msg:"Error while fetching bank details.")};this.loaderService.showLoader(),this.bankService.getById({bankId:this.bankId},u,f)},this.getMerchantList=()=>{let u=i=>{i&&i.success?i.data&&i.data.length?(this.merchantList=i.data,this.getBankID()):this.merchantList=[]:this.toastrService.showError("Error!",i.message),this.loaderService.hideLoader()},f=i=>{this.loaderService.hideLoader(),this.toastrService.showError("Error!",i.error&&i.error?.errors?.msg?i.error.errors.msg:"Error while fetching merchant.")};this.loaderService.showLoader(),this.merchantService.getAll({},u,f)},this.differenceById=(u,f,i)=>{let I=new Set(f.map(l=>l.ref)),w=u.filter(l=>!I.has(l.merchantId));if(i){let l=u.find(we=>we.merchantId===i);l&&w.push(l)}return w},this.getBankID=()=>{let u=i=>{this.loaderService.hideLoader(),i&&i.success?i.data&&i.data.length?(this.bankIdList=i.data,this.merchantList=this.differenceById(this.merchantList,i.data,this.refId)):this.bankIdList=[]:this.toastrService.showError("Error!",i.message)},f=i=>{this.loaderService.hideLoader(),this.toastrService.showError("Error!",i.error&&i.error?.errors?.msg?i.error.errors.msg:"Error while validating credentials.")};this.loaderService.showLoader(),this.bankService.getBankID({},u,f)},this.onBankSubmit=()=>{let u=l=>{this.loaderService.hideLoader(),l&&l.success?(this.toastrService.showSuccess("Success!",l.message),this.utilService.goto("/banks/list")):this.toastrService.showError("Error!",l&&l?.message?l?.message:"Error while saving bank record.")},f=l=>{this.loaderService.hideLoader(),this.toastrService.showError("Error!",l.error&&l.error?.errors?.msg?l.error.errors.msg:"Error while saving bank record.")};this.loaderService.showLoader();let i=this.bankForm.value,I=this.withdrawlForm.value.withdrawlFields.every(l=>l.fieldName&&l.displayMode&&l.fieldType&&(l.placeHolder||l.fieldType==="checkbox")&&l.required!==void 0),w=this.depositForm.value.depositFields.every(l=>l.fieldName&&l.displayMode&&l.fieldType&&(l.placeHolder||l.fieldType==="checkbox")&&l.required!==void 0);I&&(i.withdrawals=this.withdrawlForm.value.withdrawlFields),w&&(i.deposits=this.depositForm.value.depositFields),this.editBankData?.bankId?(i.bankId=this.editBankData.bankId,this.bankService.update(i,u,f)):this.bankService.add(i,u,f)},this.params=this.route.params.subscribe(u=>{u.bankId&&(this.bankId=u.bankId),u.ref&&(this.refId=u.ref)}),this.bankId&&this.getById(),this.buildForm()}ngOnInit(){this.getMerchantList()}ngOnDestroy(){try{this.params&&this.params.unsubscribe()}catch(e){console.error(e)}}buildForm(e){this.bankForm=this.fb.group({bankName:[e&&e.bankName?e.bankName:""],active:[e&&e.active?e.active:!1],ref:[e&&e.ref?e.ref:""],uploadDetails:this.fb.array(this.initUploadDetails(e?.uploadDetails||[]))}),this.depositForm=this.fb.group({depositFields:this.fb.array(e?.deposits&&e.deposits.length>0?this.initdepositDetails(e.deposits[0].typeDetails):[this.depositItem()])}),this.withdrawlForm=this.fb.group({withdrawlFields:this.fb.array(e?.withdrawals&&e.withdrawals.length>0?this.initwithdrawDetails(e.withdrawals[0].typeDetails):[this.withdrawlItem()])})}get uploadDetails(){return this.bankForm.get("uploadDetails")}initUploadDetails(e){return e.map(c=>this.bankItem(c))}bankItem(e){return this.fb.group({uploadName:[e?.uploadName?e?.uploadName:""],uploadValue:[e?.uploadValue?e?.uploadValue:""]})}addBankItem(){this.uploadDetails.push(this.bankItem(null))}removeBankItem(e){this.uploadDetails.removeAt(e)}get depositFields(){return this.depositForm.get("depositFields")}initdepositDetails(e){return e.map(c=>this.depositItem(c))}depositItem(e){return this.fb.group({fieldName:[e&&e.fieldName?e.fieldName:""],displayMode:[e&&e.displayMode?e.displayMode:""],fieldType:[e&&e.fieldType?e.fieldType:""],placeHolder:[e&&e.placeHolder?e.placeHolder:""],required:[e&&e.required?e.required:!1]})}adddepositItem(){this.depositFields.push(this.depositItem())}removeDepositItem(e){this.depositFields.removeAt(e)}onDepositSubmit(){}get withdrawlFields(){return this.withdrawlForm.get("withdrawlFields")}initwithdrawDetails(e){return e.map(c=>this.withdrawlItem(c))}withdrawlItem(e){return this.fb.group({fieldName:[e&&e.fieldName?e.fieldName:""],displayMode:[e&&e.displayMode?e.displayMode:""],fieldType:[e&&e.fieldType?e.fieldType:""],placeHolder:[e&&e.placeHolder?e.placeHolder:""],required:[e&&e.required?e.required:!1]})}addwithdrawlItem(){this.withdrawlFields.push(this.withdrawlItem())}removewithdrawlItem(e){this.withdrawlFields.removeAt(e)}onwithdrawlSubmit(){}};p.\u0275fac=function(c){return new(c||p)(g(ce),g(ue),g(be),g(M),g(ee),g(V),g(ve))},p.\u0275cmp=D({type:p,selectors:[["app-bank-details"]],standalone:!0,features:[N],decls:69,vars:16,consts:[["xs","12"],[1,"mb-3"],["variant","underline-border"],["cTab","",3,"itemKey"],["cIcon","","name","cilUser",1,"me-2"],["cIcon","","name","cilDollar",1,"me-2"],[1,"p-3",3,"itemKey"],["cForm","",3,"formGroup"],[1,"row"],["sm","12","xs","12","md","6","lg","4"],["cLabel","col","for","bankLabel"],["cFormControl","","placeholder","Bank Name","type","text","formControlName","bankName","id","bankLabel","name","bankName"],["cLabel","col","for","ref"],["formControlName","ref","name","ref","bindValue","merchantId","bindLabel","merchantname",3,"items","multiple","clearable"],["cLabel","col","for","active"],["sizing","lg","switch",""],["cFormCheckInput","","type","checkbox","formControlName","active","id","active","name","active"],["cFormCheckLabel",""],[2,"margin","2rem"],["sm","12","xs","12","md","3","lg","3"],["sm","12","xs","12","md","2","lg","2",2,"float","right"],["cButton","","color","primary",3,"click"],["formArrayName","uploadDetails"],[3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","depositFields"],[1,"col-auto"],["formArrayName","withdrawlFields"],[1,"row",2,"float","right"],[1,"col-2","d-flex","align-items-center"],["cButton","","color","secondary",3,"click"],[3,"formGroupName"],["sm","12","xs","12","md","5","lg","5"],["for","uploadName"],["cFormControl","","placeholder","Name","type","text","formControlName","uploadName","id","uploadName","name","uploadName"],["for","uploadValue"],["cFormControl","","placeholder","Value","type","text","formControlName","uploadValue","id","uploadValue","name","uploadValue"],["sm","12","xs","12","md","2","lg","2"],["cButton","","color","secondary",3,"click",4,"ngIf"],["cLabel","col","for","fieldName"],["cFormControl","","placeholder","Field Name","type","text","formControlName","fieldName","id","fieldName","name","fieldName"],["formControlName","displayMode","name","displayMode","bindValue","value","bindLabel","label","placeholder","Select Display Mode",3,"items","multiple","clearable"],["formControlName","fieldType","name","fieldType","bindValue","value","bindLabel","label","placeholder","Select Field",3,"items","multiple","clearable"],["sizing","lg","switch","",1,"check-mb"],["cFormCheckLabel","","for","required"],["cFormCheckInput","","type","checkbox","formControlName","required","id","required","name","required"],["sm","12","xs","12","md","5","lg","5",4,"ngIf"],["cFormControl","","placeholder","PlaceHolder","type","text","formControlName","placeHolder","id","placeHolder","name","placeHolder"],["cLabel","col","for","placeHolder"]],template:function(c,o){c&1&&(r(0,"c-row")(1,"c-col",0)(2,"c-card",1)(3,"c-card-header"),n(4,`
                `),r(5,"strong"),n(6),t(),n(7,`
            `),t(),r(8,"c-card-body")(9,"c-tabs")(10,"c-tabs-list",2)(11,"button",3),C(),d(12,"svg",4),n(13," Banks "),t(),x(),r(14,"button",3),C(),d(15,"svg",5),n(16," Deposits "),t(),x(),r(17,"button",3),C(),d(18,"svg",5),n(19," Withdrawls "),t()(),x(),r(20,"c-tabs-content")(21,"c-tab-panel",6)(22,"form",7)(23,"c-row",8)(24,"c-col",9)(25,"label",10),n(26," Bank "),t(),d(27,"input",11),t(),r(28,"c-col",9)(29,"label",12),n(30," Merchant "),t(),d(31,"ng-select",13),t(),r(32,"c-col",9),d(33,"label",14),r(34,"c-form-check",15),d(35,"input",16),r(36,"label",17),n(37," Active?"),t()()()(),d(38,"div",18),r(39,"div",8)(40,"c-row",8)(41,"c-col",19)(42,"h5"),n(43,"Upload Details"),t()(),r(44,"c-col",20)(45,"button",21),_("click",function(){return o.addBankItem()}),n(46,"+"),t()()(),r(47,"div",22),v(48,Se,12,2,"div",23),t()()()(),r(49,"c-tab-panel",6)(50,"form",7)(51,"div",24),v(52,Fe,23,9,"div",23),t(),r(53,"div",8)(54,"div",25)(55,"button",21),_("click",function(){return o.adddepositItem()}),n(56,"+"),t()()()()(),r(57,"c-tab-panel",6)(58,"form",7)(59,"div",26),v(60,Ee,23,9,"div",23),t(),r(61,"div",8)(62,"div",25)(63,"button",21),_("click",function(){return o.addwithdrawlItem()}),n(64,"+"),t()()()()()()(),r(65,"div",27)(66,"div",28)(67,"button",29),_("click",function(){return o.onBankSubmit()}),n(68,"Submit "),t()()()()()()()),c&2&&(s(6),E("",o.bankId?"Edit":"Add"," Bank"),s(5),a("itemKey",0),s(3),a("itemKey",1),s(3),a("itemKey",2),s(4),a("itemKey",0),s(),a("formGroup",o.bankForm),s(9),a("items",o.merchantList)("multiple",!1)("clearable",!1),s(17),a("ngForOf",o.uploadDetails.controls),s(),a("itemKey",1),s(),a("formGroup",o.depositForm),s(2),a("ngForOf",o.depositFields.controls),s(5),a("itemKey",2),s(),a("formGroup",o.withdrawlForm),s(2),a("ngForOf",o.withdrawlFields.controls))},dependencies:[B,L,T,P,A,q,$,W,Q,Z,J,Y,X,H,fe,he,de,ne,ie,te,re,le,pe,oe,me,ae,se,z,O,R,j,U,K,G],styles:[".row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.col-5[_ngcontent-%COMP%]{flex:1;padding-right:10px}.col-2[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;align-items:center}button[_ngcontent-%COMP%]{margin:0 5px}.check-mb[_ngcontent-%COMP%]{display:flex;padding-left:1rem}.check-mb[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:2.8rem}"]});let m=p;return m})();export{rt as BankDetailsComponent};
