import{a as m}from"./chunk-PJTZ2CZ7.js";import{c as A,d as f,e as P,f as R,h as S,j as q,l as H,o as O,u as z,w as J,y as K}from"./chunk-NGUZVOSX.js";import{a as L,d as U}from"./chunk-GJJVJTXG.js";import"./chunk-CSO4ZWHK.js";import{A as D,B as G,L as T,M as B,S as N,T as _,U as j,V,W as M,b as x,u as I,z as k}from"./chunk-IBYGZ3TV.js";import{Ia as F,N as C,Ta as i,Ua as t,Va as l,X as g,Y as h,ab as v,ec as b,nb as c,oa as w,pa as o,tb as y,ub as E}from"./chunk-ICF7HI7T.js";import"./chunk-ENQRHBTS.js";var ce=(()=>{let n=class n{constructor(d,a,s,u,Q,W){this.router=d,this.fb=a,this.toastrService=s,this.authService=u,this.localStorageService=Q,this.loaderService=W,this.gotoRegister=()=>{this.router.navigateByUrl("/register")},this.buildForm=r=>{this.loginForm=this.fb.group({email:new S(r&&r.email?r.email:null,[f.required]),password:new S(r&&r.password?r.password:null,[f.required])})},this.handleLoginEvent=()=>{let r=e=>{this.loaderService.hideLoader(),e&&e.success?(this.localStorageService.create(),this.localStorageService.setValue("user",e.user),this.localStorageService.setValue("auth",e.auth),this.router.navigateByUrl("/dashboard")):this.toastrService.showError("Error!",e.message)},X=e=>{this.loaderService.hideLoader(),this.toastrService.showError("Error!",e.error&&e.error?.errors?.msg?e.error.errors.msg:"Error while validating credentials.")};this.loaderService.showLoader(),this.authService.login({email:this.loginForm.get("email")?.value,grantType:"password",password:this.loginForm.get("password")?.value},r,X)},this.handleForgotPasswordEvent=()=>{this.router.navigateByUrl("/forgot-password")},this.authService.isLoggedIn()&&this.router.navigateByUrl("/dashboard")}ngOnInit(){this.title="Administrator Login",this.buildForm()}};n.\u0275fac=function(a){return new(a||n)(o(b),o(z),o(K),o(m),o(U),o(L))},n.\u0275cmp=C({type:n,selectors:[["app-login"]],standalone:!0,features:[y([m]),E],decls:27,vars:1,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],["breakpoint","md"],[1,"justify-content-center"],["lg","10","xl","8"],[1,"p-4"],["cForm","",3,"formGroup"],[1,"text-body-secondary"],[1,"mb-3"],["cInputGroupText",""],["cIcon","","name","cilUser"],["autoComplete","email","type","email","formControlName","email","id","email","name","email","cFormControl","","placeholder","Email"],[1,"mb-4"],["cIcon","","name","cilLockLocked"],["formControlName","password","autoComplete","current-password","cFormControl","","placeholder","Password","type","password","id","password","name","password"],["xs","8"],["cButton","","color","primary",1,"px-4",3,"click"],["xs","6",1,"text-right"],["cButton","","color","link",1,"px-0",3,"click"]],template:function(a,s){a&1&&(i(0,"div",0)(1,"c-container",1)(2,"c-row",2)(3,"c-col",3)(4,"c-card-group")(5,"c-card",4)(6,"c-card-body")(7,"form",5)(8,"h1"),c(9,"Login"),t(),i(10,"p",6),c(11,"Sign In to your account"),t(),i(12,"c-input-group",7)(13,"span",8),g(),l(14,"svg",9),t(),h(),l(15,"input",10),t(),i(16,"c-input-group",11)(17,"span",8),g(),l(18,"svg",12),t(),h(),l(19,"input",13),t(),i(20,"c-row")(21,"c-col",14)(22,"button",15),v("click",function(){return s.handleLoginEvent()}),c(23," Login "),t()(),i(24,"c-col",16)(25,"button",17),v("click",function(){return s.handleForgotPasswordEvent()}),c(26," Forgot password? "),t()()()()()()()()()()()),a&2&&(w(7),F("formGroup",s.loginForm))},dependencies:[J,q,A,P,R,H,O,j,M,V,G,k,D,T,B,_,x,N,I]});let p=n;return p})();export{ce as LoginComponent};
